<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>מבחן מתקדם בעברית וחשבון</title>
    <style>
        body { font-family: 'Arial', 'Helvetica Neue', Helvetica, sans-serif; line-height: 1.7; margin: 0; padding: 20px; background-color: #f0f2f5; color: #333; }
        .quiz-container { background-color: #fff; padding: 25px; border-radius: 12px; box-shadow: 0 6px 18px rgba(0,0,0,0.1); max-width: 850px; margin: 20px auto; }
        h1 { color: #2c3e50; text-align: center; margin-bottom: 15px; font-size: 2em; }
        h2 { color: #34495e; margin-top: 35px; border-bottom: 2px solid #95a5a6; padding-bottom: 10px; font-size: 1.6em;}
        .quiz-intro { text-align: center; margin-bottom: 25px; font-size: 1.1em; color: #555; }
        .attempt-counter { text-align: center; font-weight: bold; margin-bottom: 20px; font-size: 1.15em; color: #d35400; }
        .text-block { margin-bottom: 30px; padding: 15px; background-color: #fdfefe; border: 1px solid #e1e8ed; border-radius: 8px; }
        .hebrew-text { font-size: 1.25em; margin-bottom: 12px; text-align: right; }
        .vocabulary { font-size: 0.95em; color: #555; margin-bottom: 18px; padding-right: 20px; border-right: 3px solid #3498db; }
        .vocabulary details summary { cursor: pointer; font-weight: bold; color: #2980b9; margin-bottom: 5px;}
        .vocabulary ul { padding-right: 20px; margin-top: 5px; list-style-type: disc; }
        .question { margin-bottom: 20px; }
        .question p { margin-bottom: 10px; font-weight: 600; font-size: 1.1em;}
        .options label { display: block; margin-bottom: 8px; cursor: pointer; padding: 12px; border-radius: 6px; transition: background-color 0.2s, border-color 0.2s; border: 1px solid #ccd1d9; }
        .options label:hover { background-color: #eef5ff; border-color: #a8caff; }
        .options input[type="radio"] { margin-left: 10px; vertical-align: middle; }
        .options input[type="radio"]:disabled + span { color: #8491a5; }
        .feedback { font-size: 1em; font-weight: bold; margin-top: 10px; padding: 12px; border-radius: 6px; border-right-width: 5px; border-right-style: solid; }
        .correct { color: #2ecc71; background-color: #eafaf1; border-right-color: #2ecc71; }
        .incorrect { color: #e74c3c; background-color: #fbeeed; border-right-color: #e74c3c; }
        .unanswered { color: #f1c40f; background-color: #fef9e7; border-right-color: #f1c40f; }
        #results-container { margin-top: 35px; padding: 25px; background-color: #e6f6f2; border: 1px solid #9ad3c1; border-radius: 10px; text-align: center; }
        #results-container h2 { color: #1abc9c; font-size: 1.8em; }
        #results-container p#score-display { font-size: 1.5em; font-weight: bold; margin-bottom: 18px; }
        #detailed-answers ol { list-style-type: none; padding-right: 0; text-align: right; }
        #detailed-answers li { padding: 12px; margin-bottom: 10px; border-radius: 6px; background-color: #f8f9fa; border: 1px solid #dee2e6; font-size: 1em;}
        .button-container { display: flex; justify-content: center; gap: 15px; margin-top: 30px; }
        .submit-button, .reset-button { width: auto; min-width: 220px; padding: 12px 25px; font-size: 1.15em; color: white; border: none; border-radius: 6px; cursor: pointer; transition: background-color 0.3s ease, transform 0.1s ease; }
        .submit-button { background-color: #3498db; }
        .submit-button:hover { background-color: #2980b9; }
        .reset-button { background-color: #e74c3c; }
        .reset-button:hover { background-color: #c0392b; }
        .secret-word { font-size: 1.7em; color: #27ae60; font-weight: bold; margin-top: 15px; padding:12px; background-color: #d1f2eb; border-radius:6px; display:inline-block;}
    </style>
</head>
<body>

<div class="quiz-container">
    <h1>מבחן מתקדם בעברית ושאלות חשבון (כולל שברים)</h1>
    <p class="quiz-intro">כל תשובה נכונה מזכה ב-6 נקודות. סך הנקודות המרבי: 120.<br>מילת הקסם תינתן עבור צבירה של מעל 100 נקודות. לרשותכם 3 ניסיונות בדיקה.</p>
    <div id="attempt-counter-display" class="attempt-counter"></div>

    <form id="quizForm">
        <!-- קטע 1: אוכל ושתייה (שאלות 1-4) -->
        <div class="text-block">
            <div class="hebrew-text">
                נוֹעָה הֵכִינָה פִּיצָה. הִיא חִילְקָה אוֹתָה לְ-8 מְשׁוּלָשִׁים שָׁוִים. יָאִיר אָכַל 1/4 מֵהַפִּיצָה, וְדָנָה אָכְלָה מְשׁוּלָשׁ אֶחָד.
            </div>
            <div class="vocabulary">
                <details><summary>מילון:</summary><ul>
                    <li>הֵכִינָה (hэхи́на) - приготовила</li>
                    <li>פִּיצָה (пи́ца) - пицца</li>
                    <li>חִילְקָה (хилька́) - разделила</li>
                    <li>מְשׁוּלָשִׁים (мэшулаши́м) - треугольники (куски пиццы)</li>
                    <li>שָׁוִים (шави́м) - равные</li>
                    <li>אָכַל (аха́ль) - съел</li>
                    <li>רֶבַע (рэ́ва) - четверть (1/4)</li>
                </ul></details>
            </div>
            <div class="question">
                <p>1. כַּמָה מְשׁוּלָשֵׁי פִּיצָה אָכַל יָאִיר?</p>
                <div class="options">
                    <label><input type="radio" name="q1" value="A"><span> א) משולש 1</span></label>
                    <label><input type="radio" name="q1" value="B"><span> ב) 2 משולשים</span></label>
                    <label><input type="radio" name="q1" value="C"><span> ג) 3 משולשים</span></label>
                    <label><input type="radio" name="q1" value="D"><span> ד) 4 משולשים</span></label>
                </div><div class="feedback" id="feedback-q1"></div>
            </div>
            <div class="question">
                <p>2. אֵיזֶה חֵלֶק מֵהַפִּיצָה אָכְלוּ יָאִיר וְדָנָה יַחַד?</p>
                <div class="options">
                    <label><input type="radio" name="q2" value="A"><span> א) 1/8</span></label>
                    <label><input type="radio" name="q2" value="B"><span> ב) 1/4</span></label>
                    <label><input type="radio" name="q2" value="C"><span> ג) 3/8</span></label>
                    <label><input type="radio" name="q2" value="D"><span> ד) 1/2</span></label>
                </div><div class="feedback" id="feedback-q2"></div>
            </div>
            <div class="question">
                <p>3. כַּמָה מְשׁוּלָשִׁים נִשְׁאֲרוּ מֵהַפִּיצָה?</p>
                <div class="options">
                    <label><input type="radio" name="q3" value="A"><span> א) 3 משולשים</span></label>
                    <label><input type="radio" name="q3" value="B"><span> ב) 4 משולשים</span></label>
                    <label><input type="radio" name="q3" value="C"><span> ג) 5 משולשים</span></label>
                    <label><input type="radio" name="q3" value="D"><span> ד) 6 משולשים</span></label>
                </div><div class="feedback" id="feedback-q3"></div>
            </div>
            <div class="question">
                <div class="hebrew-text">בְּבַקְבּוּק הָיוּ 2 לִיטֵר מִיץ. רוֹנִי שָׁתָה 1/2 (חֲצִי) מֵהַכַּמוּת, וְאַחֲרָיו גִיל שָׁתָה 1/4 מִמָה שֶׁנִשְׁאַר.</div>
                <div class="vocabulary">
                    <details><summary>מילון:</summary><ul>
                        <li>לִיטֵר (ли́тэр) - литр</li>
                        <li>שָׁתָה (шата́) - выпил</li>
                        <li>כַּמוּת (каму́т) - количество</li>
                        <li>נִשְׁאַר (ниш'а́р) - осталось</li>
                    </ul></details>
                </div>
                <p>4. כַּמָה לִיטֵר מִיץ נִשְׁאֲרוּ בַּבַּקְבּוּק לְאַחַר שֶׁגִיל שָׁתָה?</p>
                <div class="options">
                    <label><input type="radio" name="q4" value="A"><span> א) 1/4 ליטר</span></label>
                    <label><input type="radio" name="q4" value="B"><span> ב) 1/2 ליטר</span></label>
                    <label><input type="radio" name="q4" value="C"><span> ג) 3/4 ליטר</span></label>
                    <label><input type="radio" name="q4" value="D"><span> ד) 1 ליטר</span></label>
                </div><div class="feedback" id="feedback-q4"></div>
            </div>
        </div>

        <!-- קטע 2: בעלי חיים ומשקלים (שאלות 5-8) -->
        <div class="text-block">
            <div class="hebrew-text">
                בְּחַוָוה יֵשׁ 12 תַרְנְגוֹלוֹת, 8 כְּבָשִׂים וְ-5 פָּרוֹת. כָּל תַרְנְגוֹלֶת אוֹכֶלֶת 100 גְרָם מָזוֹן בְּיוֹם. כָּל כִּבְשָׂה אוֹכֶלֶת 500 גְרָם.
            </div>
            <div class="vocabulary">
                <details><summary>מילון:</summary><ul>
                    <li>חַוָוה (хава́) - ферма</li>
                    <li>תַרְנְגוֹלוֹת (тарнэголо́т) - куры</li>
                    <li>כְּבָשִׂים (кваси́м) - овцы (мн.ч. от כֶּבֶשׂ - кэ́вэс)</li>
                    <li>פָּרוֹת (паро́т) - коровы (мн.ч. от פָּרָה - пара́)</li>
                    <li>אוֹכֶלֶת (охэ́лет) - ест (ж.р.)</li>
                    <li>גְרָם (грам) - грамм</li>
                    <li>מָזוֹן (мазо́н) - пища, корм</li>
                    <li>כִּבְשָׂה (кивса́) - овца (ед.ч.)</li>
                </ul></details>
            </div>
            <div class="question">
                <p>5. כַּמָה בַּעֲלֵי חַיִים יֵשׁ בַּחַוָוה בְּסַךְ הַכֹּל?</p>
                <div class="options">
                    <label><input type="radio" name="q5" value="A"><span> א) 20</span></label>
                    <label><input type="radio" name="q5" value="B"><span> ב) 23</span></label>
                    <label><input type="radio" name="q5" value="C"><span> ג) 25</span></label>
                    <label><input type="radio" name="q5" value="D"><span> ד) 28</span></label>
                </div><div class="feedback" id="feedback-q5"></div>
            </div>
            <div class="question">
                <p>6. כַּמָה גְרָם מָזוֹן אוֹכְלוֹת כָּל הַתַרְנְגוֹלוֹת יַחַד בְּיוֹם?</p>
                <div class="options">
                    <label><input type="radio" name="q6" value="A"><span> א) 1000 גרם (1 ק"ג)</span></label>
                    <label><input type="radio" name="q6" value="B"><span> ב) 1200 גרם (1.2 ק"ג)</span></label>
                    <label><input type="radio" name="q6" value="C"><span> ג) 1500 גרם (1.5 ק"ג)</span></label>
                    <label><input type="radio" name="q6" value="D"><span> ד) 120 גרם</span></label>
                </div><div class="feedback" id="feedback-q6"></div>
            </div>
            <div class="question">
                <p>7. כַּמָה קִילוֹגְרָם מָזוֹן אוֹכְלוֹת כָּל הַכְּבָשִׂים יַחַד בְּיוֹם?</p>
                <div class="options">
                    <label><input type="radio" name="q7" value="A"><span> א) 2 ק"ג</span></label>
                    <label><input type="radio" name="q7" value="B"><span> ב) 3 ק"ג</span></label>
                    <label><input type="radio" name="q7" value="C"><span> ג) 4 ק"ג</span></label>
                    <label><input type="radio" name="q7" value="D"><span> ד) 5 ק"ג</span></label>
                </div><div class="feedback" id="feedback-q7"></div>
            </div>
            <div class="question">
                <p>8. אִם 1/3 מֵהַפָּרוֹת הֵן פָּרוֹת חוֹלְבוֹת, כַּמָה פָּרוֹת אֵינָן חוֹלְבוֹת (בְּהַנָחָה שֶׁהַמִסְפָּר שָׁלֵם)?</p>
                <div class="vocabulary">
                    <details><summary>מילון:</summary><ul>
                        <li>חוֹלְבוֹת (хольво́т) - дойные (коровы)</li>
                        <li>שְׁלִישׁ (шлиш) - треть (1/3)</li>
                        <li>בְּהַנָחָה (бэ-hанаха́) - при условии, предполагая</li>
                        <li>מִסְפָּר שָׁלֵם (миспа́р шале́м) - целое число</li>
                    </ul></details>
                </div>
                 <div class="options"> <!-- 5 פרות. 1/3 מ-5 לא שלם. השאלה מכוונת לכך שהתשובה צריכה להיות שלמה. אם 1/3 חולבות, אז יש בעיה בנתונים אם צריך מספר שלם. נניח שזו הייתה שאלה "כמה בערך" או שהיו 6 פרות. עם 5 פרות, אם 1/3 חולבות (1.66) זה בעייתי. נשנה את השאלה או את הנתונים כך שיהיה הגיוני. נשאיר את הנתונים, ונבין שהכוונה היא לשאלה מעט טריקית או לדרוש עיגול / הבנה שזה לא אפשרי במספרים שלמים. או שנפרש את 1/3 כ"בערך".
                 נניח שהכוונה לשאלה האם ניתן לחלק ל-1/3 ו-2/3 בצורה שלמה. -->
                 <!-- נשנה את השאלה כדי שתהיה פתירה במספרים שלמים -->
                 <!-- נניח שהיו 6 פרות במקום 5. אז 1/3 זה 2 חולבות, ו-4 לא חולבות. -->
                 <!-- אם נשארים עם 5, ו-1/3 חולבות (1.66), אז לא חולבות זה 3.33. זה לא נכון. -->
                 <!-- נשנה את השאלה: אם 2/5 מהפרות חולבות. 2/5 מ-5 זה 2 חולבות. אז 3 לא חולבות. זה עובד. -->
                 <!-- נשנה את השאלה המקורית ל: אם שתי חמישיות (2/5) מהפרות הן חולבות. -->
                <p>שאלה מתוקנת: אִם 2/5 מֵהַפָּרוֹת הֵן פָּרוֹת חוֹלְבוֹת, כַּמָה פָּרוֹת אֵינָן חוֹלְבוֹת?</p>
                <div class="options">
                    <label><input type="radio" name="q8" value="A"><span> א) 1</span></label>
                    <label><input type="radio" name="q8" value="B"><span> ב) 2</span></label>
                    <label><input type="radio" name="q8" value="C"><span> ג) 3</span></label>
                    <label><input type="radio" name="q8" value="D"><span> ד) 4</span></label>
                </div><div class="feedback" id="feedback-q8"></div>
            </div>
        </div>
        
        <!-- קטע 3: בנייה ומידות (שאלות 9-12) -->
        <div class="text-block">
            <div class="hebrew-text">
                דָוִד בּוֹנֶה גָדֵר סְבִיב גִינָה מַלְבְּנִית. אֹרֶךְ הַגִינָה 10 מֶטְרִים וְרוֹחֲבָה 6 מֶטְרִים. כָּל מֶטֶר גָדֵר עוֹלֶה 20 שְׁקָלִים.
            </div>
            <div class="vocabulary">
                <details><summary>מילון:</summary><ul>
                    <li>בּוֹנֶה (бонэ́) - строит</li>
                    <li>גָדֵר (гадэ́р) - забор</li>
                    <li>סְבִיב (свив) - вокруг</li>
                    <li>גִינָה (гина́) - сад</li>
                    <li>מַלְבְּנִית (мальбени́т) - прямоугольная</li>
                    <li>אֹרֶךְ (о́рэх) - длина</li>
                    <li>מֶטֶר (мэ́тэр) - метр</li>
                    <li>רוֹחַב (ро́хав) - ширина</li>
                </ul></details>
            </div>
            <div class="question">
                <p>9. מָהוּ הֶקֵף הַגִינָה?</p>
                 <div class="vocabulary">
                    <details><summary>מילון:</summary><ul>
                        <li>הֶקֵף (hэкэ́ф) - периметр</li>
                    </ul></details>
                </div>
                <div class="options">
                    <label><input type="radio" name="q9" value="A"><span> א) 16 מטר</span></label>
                    <label><input type="radio" name="q9" value="B"><span> ב) 26 מטר</span></label>
                    <label><input type="radio" name="q9" value="C"><span> ג) 32 מטר</span></label>
                    <label><input type="radio" name="q9" value="D"><span> ד) 60 מטר</span></label>
                </div><div class="feedback" id="feedback-q9"></div>
            </div>
            <div class="question">
                <p>10. כַּמָה תַעֲלֶה לְדָוִד הַגָדֵר כּוּלָה?</p>
                <div class="options">
                    <label><input type="radio" name="q10" value="A"><span> א) 320 ש"ח</span></label>
                    <label><input type="radio" name="q10" value="B"><span> ב) 520 ש"ח</span></label>
                    <label><input type="radio" name="q10" value="C"><span> ג) 640 ש"ח</span></label>
                    <label><input type="radio" name="q10" value="D"><span> ד) 1200 ש"ח</span></label>
                </div><div class="feedback" id="feedback-q10"></div>
            </div>
             <div class="question">
                <div class="hebrew-text">
                    לְצִבְעַת הַגָדֵר דָרוּשׁ לִיטֵר צֶבַע אֶחָד לְכָל 4 מֶטְרִים שֶׁל גָדֵר. פַּח צֶבַע מֵכִיל 2 לִיטֵר.
                </div>
                <div class="vocabulary">
                    <details><summary>מילון:</summary><ul>
                        <li>צְבִיעָה (цви'а́) - покраска</li>
                        <li>דָרוּשׁ (дару́ш) - требуется</li>
                        <li>צֶבַע (цэ́ва) - краска</li>
                        <li>פַּח (пах) - банка (жестяная)</li>
                        <li>מֵכִיל (мэхи́ль) - содержит</li>
                    </ul></details>
                </div>
                <p>11. כַּמָה לִיטְרִים שֶׁל צֶבַע דְרוּשִׁים לִצְבִיעַת כָּל הַגָדֵר?</p>
                <div class="options">
                    <label><input type="radio" name="q11" value="A"><span> א) 4 ליטר</span></label>
                    <label><input type="radio" name="q11" value="B"><span> ב) 6 ליטר</span></label>
                    <label><input type="radio" name="q11" value="C"><span> ג) 8 ליטר</span></label>
                    <label><input type="radio" name="q11" value="D"><span> ד) 10 ליטר</span></label>
                </div><div class="feedback" id="feedback-q11"></div>
            </div>
             <div class="question">
                <p>12. כַּמָה פַּחֵי צֶבַע יִצְטָרֵךְ דָוִד לִקְנוֹת?</p>
                <div class="options">
                    <label><input type="radio" name="q12" value="A"><span> א) 2 פחים</span></label>
                    <label><input type="radio" name="q12" value="B"><span> ב) 3 פחים</span></label>
                    <label><input type="radio" name="q12" value="C"><span> ג) 4 פחים</span></label>
                    <label><input type="radio" name="q12" value="D"><span> ד) 5 פחים</span></label>
                </div><div class="feedback" id="feedback-q12"></div>
            </div>
        </div>

        <!-- קטע 4: זמן, מהירות ומרחק (שאלות 13-16) -->
        <div class="text-block">
            <div class="hebrew-text">מְכוֹנִית נוֹסַעַת בִּמְהִירוּת קְבוּעָה שֶׁל 80 קמ"ש (קִילוֹמֶטֶר לְשָׁעָה) בְּמֶשֶׁךְ 3 שָׁעוֹת.</div>
            <div class="vocabulary">
                <details><summary>מילון:</summary><ul>
                    <li>מְכוֹנִית (мэхони́т) - машина</li>
                    <li>מְהִירוּת (мэhиру́т) - скорость</li>
                    <li>קְבוּעָה (кву'а́) - постоянная</li>
                    <li>קמ"ש (кама́ш) - км/ч</li>
                    <li>בְּמֶשֶׁךְ (бэ-мэ́шех) - в течение</li>
                    <li>שָׁעוֹת (шао́т) - часы</li>
                </ul></details>
            </div>
            <div class="question">
                <p>13. אֵיזֶה מֶרְחָק עָבְרָה הַמְכוֹנִית?</p>
                <div class="options">
                    <label><input type="radio" name="q13" value="A"><span> א) 80 ק"מ</span></label>
                    <label><input type="radio" name="q13" value="B"><span> ב) 160 ק"מ</span></label>
                    <label><input type="radio" name="q13" value="C"><span> ג) 240 ק"מ</span></label>
                    <label><input type="radio" name="q13" value="D"><span> ד) 320 ק"מ</span></label>
                </div><div class="feedback" id="feedback-q13"></div>
            </div>
            <div class="question">
                <p>14. אִם הַמְכוֹנִית הָיְתָה צְרִיכָה לַעֲבוֹר מֶרְחָק שֶׁל 400 ק"מ בְּאוֹתָה מְהִירוּת, כַּמָה זְמַן זֶה הָיָה לוֹקֵחַ?</p>
                <div class="options">
                    <label><input type="radio" name="q14" value="A"><span> א) 3 שעות</span></label>
                    <label><input type="radio" name="q14" value="B"><span> ב) 4 שעות</span></label>
                    <label><input type="radio" name="q14" value="C"><span> ג) 5 שעות</span></label>
                    <label><input type="radio" name="q14" value="D"><span> ד) 6 שעות</span></label>
                </div><div class="feedback" id="feedback-q14"></div>
            </div>
             <div class="question">
                <div class="hebrew-text">רוֹכֵב אוֹפַנַיִם רָכַב 1.5 (אחת וחצי) שָׁעוֹת בִּמְהִירוּת שֶׁל 20 קמ"ש.</div>
                 <div class="vocabulary">
                    <details><summary>מילון:</summary><ul>
                        <li>רוֹכֵב אוֹפַנַיִם (рохе́в офана́им) - велосипедист</li>
                        <li>רָכַב (раха́в) - ехал (на велосипеде, лошади)</li>
                    </ul></details>
                </div>
                <p>15. אֵיזֶה מֶרְחָק הוּא עָבַר?</p>
                <div class="options">
                    <label><input type="radio" name="q15" value="A"><span> א) 20 ק"מ</span></label>
                    <label><input type="radio" name="q15" value="B"><span> ב) 25 ק"מ</span></label>
                    <label><input type="radio" name="q15" value="C"><span> ג) 30 ק"מ</span></label>
                    <label><input type="radio" name="q15" value="D"><span> ד) 40 ק"מ</span></label>
                </div><div class="feedback" id="feedback-q15"></div>
            </div>
            <div class="question">
                <p>16. אִם חֲצִי מֵהַדֶרֶךְ הָיְתָה עֲלִיָה קָשָׁה, כַּמָה קִילוֹמֶטְרִים הָיְתָה הָעֲלִיָה?</p>
                 <div class="vocabulary">
                    <details><summary>מילון:</summary><ul>
                        <li>עֲלִיָה (алия́) - подъем</li>
                        <li>קָשָׁה (каша́) - тяжелый, трудный (ж.р.)</li>
                    </ul></details>
                </div>
                <div class="options">
                    <label><input type="radio" name="q16" value="A"><span> א) 10 ק"מ</span></label>
                    <label><input type="radio" name="q16" value="B"><span> ב) 15 ק"מ</span></label>
                    <label><input type="radio" name="q16" value="C"><span> ג) 20 ק"מ</span></label>
                    <label><input type="radio" name="q16" value="D"><span> ד) 7.5 ק"מ</span></label>
                </div><div class="feedback" id="feedback-q16"></div>
            </div>
        </div>

        <!-- קטע 5: שאלות חשבון ושברים (שאלות 17-20) -->
        <div class="text-block">
            <div class="question">
                <p>17. מָה הַתוֹצָאָה שֶׁל הַתַרְגִיל: 1/3 + 1/6 = ?</p>
                <div class="options">
                    <label><input type="radio" name="q17" value="A"><span> א) 1/9</span></label>
                    <label><input type="radio" name="q17" value="B"><span> ב) 2/9</span></label>
                    <label><input type="radio" name="q17" value="C"><span> ג) 1/2</span></label>
                    <label><input type="radio" name="q17" value="D"><span> ד) 2/6</span></label>
                </div><div class="feedback" id="feedback-q17"></div>
            </div>
            <div class="question">
                <p>18. בְּכִיתָה 30 תַלְמִידִים. 2/5 מֵהֶם מַרְכִּיבִים מִשְׁקָפַיִם. כַּמָה תַלְמִידִים מַרְכִּיבִים מִשְׁקָפַיִם?</p>
                <div class="vocabulary">
                    <details><summary>מילון:</summary><ul>
                        <li>מַרְכִּיבִים (маркиви́м) - носят (очки), собирают</li>
                        <li>מִשְׁקָפַיִם (мишкафа́им) - очки</li>
                    </ul></details>
                </div>
                <div class="options">
                    <label><input type="radio" name="q18" value="A"><span> א) 6 תלמידים</span></label>
                    <label><input type="radio" name="q18" value="B"><span> ב) 10 תלמידים</span></label>
                    <label><input type="radio" name="q18" value="C"><span> ג) 12 תלמידים</span></label>
                    <label><input type="radio" name="q18" value="D"><span> ד) 15 תלמידים</span></label>
                </div><div class="feedback" id="feedback-q18"></div>
            </div>
            <div class="question">
                <p>19. לְתָמָר הָיוּ 24 בּוּלִים. הִיא נָתְנָה 1/4 מֵהֶם לְאָחִיהָ. כַּמָה בּוּלִים נִשְׁאֲרוּ לָה?</p>
                 <div class="vocabulary">
                    <details><summary>מילון:</summary><ul>
                        <li>בּוּלִים (були́м) - марки</li>
                        <li>נָתְנָה (натна́) - дала</li>
                        <li>אָחִיהָ (ахи́hа) - её брат</li>
                    </ul></details>
                </div>
                <div class="options">
                    <label><input type="radio" name="q19" value="A"><span> א) 6 בולים</span></label>
                    <label><input type="radio" name="q19" value="B"><span> ב) 12 בולים</span></label>
                    <label><input type="radio" name="q19" value="C"><span> ג) 18 בולים</span></label>
                    <label><input type="radio" name="q19" value="D"><span> ד) 20 בולים</span></label>
                </div><div class="feedback" id="feedback-q19"></div>
            </div>
            <div class="question">
                <p>20. מָה הַתוֹצָאָה שֶׁל הַתַרְגִיל: (10 × 2) + (24 ÷ 4) - 5 = ?</p>
                <div class="options">
                    <label><input type="radio" name="q20" value="A"><span> א) 11</span></label>
                    <label><input type="radio" name="q20" value="B"><span> ב) 21</span></label>
                    <label><input type="radio" name="q20" value="C"><span> ג) 25</span></label>
                    <label><input type="radio" name="q20" value="D"><span> ד) 16</span></label>
                </div><div class="feedback" id="feedback-q20"></div>
            </div>
        </div>

        <div class="button-container">
            <button type="button" class="submit-button" onclick="submitQuiz()">בדיקת תשובות</button>
            <button type="button" class="reset-button" onclick="resetFullQuiz()" style="display: none;">התחל מבחן מחדש (איפוס מלא)</button>
        </div>
    </form>

    <div id="results-container" style="display: none;">
        <h2>התוצאות שלך:</h2>
        <p id="score-display"></p>
        <div id="detailed-answers"></div>
    </div>
</div>

<script>
    const correctAnswers = {
        q1: 'B', q2: 'C', q3: 'C', q4: 'C', 
        q5: 'C', q6: 'B', q7: 'C', q8: 'C',
        q9: 'C', q10: 'C', q11: 'C', q12: 'C',
        q13: 'C', q14: 'C', q15: 'C', q16: 'B',
        q17: 'C', q18: 'C', q19: 'C', q20: 'B'
    };

    const answerDisplayTexts = {
        q1: {A: "א) משולש 1", B: "ב) 2 משולשים", C: "ג) 3 משולשים", D: "ד) 4 משולשים", explanation: "(1/4 מ-8 משולשים = 2 משולשים)"},
        q2: {A: "א) 1/8", B: "ב) 1/4", C: "ג) 3/8", D: "ד) 1/2", explanation: "(יאיר אכל 2/8, דנה אכלה 1/8. יחד 3/8)"},
        q3: {A: "א) 3 משולשים", B: "ב) 4 משולשים", C: "ג) 5 משולשים", D: "ד) 6 משולשים", explanation: "(8 משולשים - 3 שאכלו = 5 משולשים)"},
        q4: {A: "א) 1/4 ליטר", B: "ב) 1/2 ליטר", C: "ג) 3/4 ליטר", D: "ד) 1 ליטר", explanation: "(רוני שתה 1 ליטר, נשאר 1 ליטר. גיל שתה 1/4 מ-1 ליטר = 0.25 ליטר. נשאר 1 - 0.25 = 0.75 ליטר, שהם 3/4 ליטר)"},
        q5: {A: "א) 20", B: "ב) 23", C: "ג) 25", D: "ד) 28", explanation: "(12 תרנגולות + 8 כבשים + 5 פרות = 25 בעלי חיים)"},
        q6: {A: "א) 1000 גרם (1 ק\"ג)", B: "ב) 1200 גרם (1.2 ק\"ג)", C: "ג) 1500 גרם (1.5 ק\"ג)", D: "ד) 120 גרם", explanation: "(12 תרנגולות * 100 גרם = 1200 גרם)"},
        q7: {A: "א) 2 ק\"ג", B: "ב) 3 ק\"ג", C: "ג) 4 ק\"ג", D: "ד) 5 ק\"ג", explanation: "(8 כבשים * 500 גרם = 4000 גרם = 4 ק\"ג)"},
        q8: {A: "א) 1", B: "ב) 2", C: "ג) 3", D: "ד) 4", explanation: "(2/5 מ-5 פרות = 2 פרות חולבות. 5 - 2 = 3 פרות לא חולבות)"},
        q9: {A: "א) 16 מטר", B: "ב) 26 מטר", C: "ג) 32 מטר", D: "ד) 60 מטר", explanation: "(היקף = 2 * (אורך + רוחב) = 2 * (10 + 6) = 2 * 16 = 32 מטר)"},
        q10: {A: "א) 320 ש\"ח", B: "ב) 520 ש\"ח", C: "ג) 640 ש\"ח", D: "ד) 1200 ש\"ח", explanation: "(32 מטר * 20 ש\"ח/מטר = 640 ש\"ח)"},
        q11: {A: "א) 4 ליטר", B: "ב) 6 ליטר", C: "ג) 8 ליטר", D: "ד) 10 ליטר", explanation: "(32 מטר גדר / 4 מטר/ליטר = 8 ליטר צבע)"},
        q12: {A: "א) 2 פחים", B: "ב) 3 פחים", C: "ג) 4 פחים", D: "ד) 5 פחים", explanation: "(8 ליטר צבע / 2 ליטר/פח = 4 פחי צבע)"},
        q13: {A: "א) 80 ק\"מ", B: "ב) 160 ק\"מ", C: "ג) 240 ק\"מ", D: "ד) 320 ק\"מ", explanation: "(80 קמ\"ש * 3 שעות = 240 ק\"מ)"},
        q14: {A: "א) 3 שעות", B: "ב) 4 שעות", C: "ג) 5 שעות", D: "ד) 6 שעות", explanation: "(400 ק\"מ / 80 קמ\"ש = 5 שעות)"},
        q15: {A: "א) 20 ק\"מ", B: "ב) 25 ק\"מ", C: "ג) 30 ק\"מ", D: "ד) 40 ק\"מ", explanation: "(1.5 שעות * 20 קמ\"ש = 30 ק\"מ)"},
        q16: {A: "א) 10 ק\"מ", B: "ב) 15 ק\"מ", C: "ג) 20 ק\"מ", D: "ד) 7.5 ק\"מ", explanation: "(30 ק\"מ / 2 = 15 ק\"מ)"},
        q17: {A: "א) 1/9", B: "ב) 2/9", C: "ג) 1/2", D: "ד) 2/6", explanation: "(1/3 = 2/6.  2/6 + 1/6 = 3/6 = 1/2)"},
        q18: {A: "א) 6 תלמידים", B: "ב) 10 תלמידים", C: "ג) 12 תלמידים", D: "ד) 15 תלמידים", explanation: "(30 * (2/5) = 60/5 = 12 תלמידים)"},
        q19: {A: "א) 6 בולים", B: "ב) 12 בולים", C: "ג) 18 בולים", D: "ד) 20 בולים", explanation: "(נתנה 1/4 מ-24 = 6 בולים. נשארו 24 - 6 = 18 בולים)"},
        q20: {A: "א) 11", B: "ב) 21", C: "ג) 25", D: "ד) 16", explanation: "((10 * 2) + (24 / 4) - 5 = 20 + 6 - 5 = 26 - 5 = 21)"}
    };

    const pointsPerQuestion = 6;
    const totalQuestions = Object.keys(correctAnswers).length;
    const secretWordThreshold = 100; 
    const secretWord = "סֵפֶל"; // Кружка
    const maxAttemptsPerCycle = 3;

    let correctlyAnsweredInSession = {};
    let currentAttemptInCycle = 0;

    function updateAttemptCounterDisplay() {
        const attemptDisplay = document.getElementById('attempt-counter-display');
        if (currentAttemptInCycle <= maxAttemptsPerCycle) {
             attemptDisplay.textContent = `ניסיון בדיקה: ${currentAttemptInCycle} מתוך ${maxAttemptsPerCycle}`;
             if(currentAttemptInCycle === 0) attemptDisplay.textContent = `לחצו "בדיקת תשובות" להתחיל. ${maxAttemptsPerCycle} ניסיונות בסך הכל.`;
        } else {
            attemptDisplay.textContent = `הניסיונות אזלו.`;
        }
    }

    function submitQuiz() {
        if(currentAttemptInCycle === 0) currentAttemptInCycle = 1;
        else if (currentAttemptInCycle < maxAttemptsPerCycle) currentAttemptInCycle++;
        else if (currentAttemptInCycle >= maxAttemptsPerCycle && document.querySelector('.submit-button').style.display !== 'none' ) {
            handleFailureNoMoreAttempts();
            return;
        }
        
        updateAttemptCounterDisplay();

        let currentTotalScore = 0;
        const form = document.getElementById('quizForm');
        const resultsContainer = document.getElementById('results-container');
        const scoreDisplay = document.getElementById('score-display');
        const detailedAnswersDiv = document.getElementById('detailed-answers');
        const submitButton = document.querySelector('.submit-button');
        const resetButton = document.querySelector('.reset-button');
        
        for (let i = 1; i <= totalQuestions; i++) {
             const feedbackEl = document.getElementById('feedback-q' + i);
             if (feedbackEl && !correctlyAnsweredInSession['q' + i]) {
                 feedbackEl.textContent = '';
                 feedbackEl.className = 'feedback';
             }
        }

        for (let i = 1; i <= totalQuestions; i++) {
            const questionName = 'q' + i;
            const radioGroup = form.elements[questionName];
            const feedbackEl = document.getElementById('feedback-' + questionName);
            
            if (correctlyAnsweredInSession[questionName]) {
                currentTotalScore += pointsPerQuestion;
                continue; 
            }

            const userAnswer = radioGroup ? radioGroup.value : "";

            if (userAnswer) {
                if (userAnswer === correctAnswers[questionName]) {
                    currentTotalScore += pointsPerQuestion;
                    correctlyAnsweredInSession[questionName] = true;
                    feedbackEl.textContent = 'נכון!';
                    feedbackEl.className = 'feedback correct';
                } else {
                    feedbackEl.textContent = 'לא נכון.';
                    feedbackEl.className = 'feedback incorrect';
                }
            } else {
                feedbackEl.textContent = 'אין תשובה.';
                feedbackEl.className = 'feedback unanswered';
            }
        }

        scoreDisplay.textContent = `צברת ${currentTotalScore} מתוך ${totalQuestions * pointsPerQuestion} נקודות.`;
        resultsContainer.style.display = 'block';
        let reportHtml = "";

        if (currentTotalScore > secretWordThreshold) {
            scoreDisplay.innerHTML += `<br><strong class="secret-word">כל הכבוד! מילת הקסם שלך היא: ${secretWord}</strong>`;
            
            reportHtml = '<h3>פירוט תשובות (הצלחה!):</h3><ol>';
            for (let i = 1; i <= totalQuestions; i++) {
                const qName = 'q' + i;
                reportHtml += `<li>שאלה ${i}: `;
                if (correctlyAnsweredInSession[qName]) {
                     reportHtml += `<span class="correct">נכון.</span> תשובתך: "${answerDisplayTexts[qName][correctAnswers[qName]]}"`;
                     if (answerDisplayTexts[qName].explanation) reportHtml += ` ${answerDisplayTexts[qName].explanation}`;
                } else { 
                    const userAnswerVal = form.elements[qName] ? form.elements[qName].value : "";
                    reportHtml += `<span class="incorrect">לא נכון.</span> `;
                    if(userAnswerVal && answerDisplayTexts[qName][userAnswerVal]) {
                        reportHtml += `תשובתך הייתה: "${answerDisplayTexts[qName][userAnswerVal]}". `;
                    }
                    reportHtml += `התשובה הנכונה: "${answerDisplayTexts[qName][correctAnswers[qName]]}"`;
                    if (answerDisplayTexts[qName].explanation) reportHtml += ` ${answerDisplayTexts[qName].explanation}`;
                }
                reportHtml += `</li>`;
            }
            reportHtml += '</ol>';
            detailedAnswersDiv.innerHTML = reportHtml;

            for (let i = 1; i <= totalQuestions; i++) {
                const qName = 'q' + i;
                const radios = form.elements[qName];
                if (radios) { for (const radio of radios) radio.disabled = true; }
            }
            submitButton.style.display = 'none';
            resetButton.textContent = "התחל מבחן מחדש (איפוס מלא)";
            resetButton.style.display = 'block';

        } else {
            if (currentAttemptInCycle < maxAttemptsPerCycle) {
                scoreDisplay.innerHTML += `<br><span style="color:red;">נסה/י לשפר את התוצאה! נותרו לך ${maxAttemptsPerCycle - currentAttemptInCycle} ניסיונות.</span>`;
                
                reportHtml = '<h3>תוצאות הניסיון הנוכחי:</h3><ol>';
                 for (let i = 1; i <= totalQuestions; i++) {
                    const qName = 'q' + i;
                    const radios = form.elements[qName];
                    let userAnswerVal = "";
                     if (radios && !correctlyAnsweredInSession[qName]) {
                         for(const radio of radios) { if(radio.checked) userAnswerVal = radio.value; }
                     }

                    reportHtml += `<li>שאלה ${i}: `;
                    if (correctlyAnsweredInSession[qName]) {
                         reportHtml += `<span class="correct">נכון.</span> תשובה: "${answerDisplayTexts[qName][correctAnswers[qName]]}".`;
                    } else if (userAnswerVal) {
                        reportHtml += `<span class="incorrect">לא נכון.</span> תשובתך: "${answerDisplayTexts[qName][userAnswerVal]}".`;
                    } else if (radios && !radios[0].disabled) { 
                        reportHtml += `<span class="unanswered">אין תשובה.</span>`;
                    } else if (radios && radios[0].disabled) {
                         reportHtml += `<span class="correct">נכון (נענה נכונה בניסיון קודם).</span>`;
                    }
                    reportHtml += `</li>`;
                }
                reportHtml += '</ol>';
                detailedAnswersDiv.innerHTML = reportHtml;

                for (let i = 1; i <= totalQuestions; i++) {
                    const qName = 'q' + i;
                    const radios = form.elements[qName];
                    if (!radios) continue;

                    if (correctlyAnsweredInSession[qName]) { 
                        for (const radio of radios) {
                            radio.disabled = true;
                            if (radio.value === correctAnswers[qName]) radio.checked = true;
                        }
                    } else { 
                        for (const radio of radios) {
                            radio.disabled = false;
                            radio.checked = false;
                        }
                    }
                }
                submitButton.textContent = `בדיקה (ניסיון ${currentAttemptInCycle + 1})`;
                submitButton.style.display = 'block';
                resetButton.textContent = "התחל מבחן מחדש (איפוס מלא)";
                resetButton.style.display = 'block';
            } else { 
                handleFailureNoMoreAttempts();
            }
        }
    }
    
    function handleFailureNoMoreAttempts() {
        const scoreDisplay = document.getElementById('score-display');
        const detailedAnswersDiv = document.getElementById('detailed-answers');
        const submitButton = document.querySelector('.submit-button');
        const resetButton = document.querySelector('.reset-button');

        scoreDisplay.innerHTML += `<br><strong style="color:red;">לצערנו, לא צברת מספיק נקודות לאחר ${maxAttemptsPerCycle} ניסיונות. המבחן יאופס.</strong>`;
        detailedAnswersDiv.innerHTML = "<p>נסה/י שוב מההתחלה!</p>";
        submitButton.style.display = 'none';
        resetButton.textContent = "התחל מבחן מחדש";
        resetButton.style.display = 'block';
        updateAttemptCounterDisplay();
    }

    function resetFullQuiz() {
        correctlyAnsweredInSession = {};
        currentAttemptInCycle = 0;
        updateAttemptCounterDisplay();
        const form = document.getElementById('quizForm');
        form.reset(); 

        for (let i = 1; i <= totalQuestions; i++) {
            const questionName = 'q' + i;
            const radioGroup = form.elements[questionName];
            const feedbackEl = document.getElementById('feedback-' + questionName);
            if (feedbackEl) {
                feedbackEl.textContent = '';
                feedbackEl.className = 'feedback';
            }
            if (radioGroup) {
                for (const radio of radioGroup) {
                    radio.disabled = false;
                }
            }
        }
        document.getElementById('results-container').style.display = 'none';
        const submitBtn = document.querySelector('.submit-button');
        submitBtn.textContent = "בדיקת תשובות";
        submitBtn.style.display = 'block';
        document.querySelector('.reset-button').style.display = 'none';
    }

    document.addEventListener('DOMContentLoaded', () => {
        updateAttemptCounterDisplay();
        document.querySelector('.reset-button').style.display = 'none';
    });
</script>

</body>
</html>